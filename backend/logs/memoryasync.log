(sola-voice-backend) aryan98@Aryans-MacBook-Pro backend % uvicorn voice_assistant:app --reload
INFO:     Will watch for changes in these directories: ['/Users/aryan98/sola-ai-chat/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [46456] using StatReload
INFO:     Started server process [46458]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:64027 - "GET /chat HTTP/1.1" 200 OK
INFO:httpx:HTTP Request: GET https://nhvnjkhjldkzfsucqwwg.supabase.co/auth/v1/user "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://nhvnjkhjldkzfsucqwwg.supabase.co/rest/v1/chats?select=%2A&user_id=eq.39686b7e-5ee6-4e1f-9520-2c08726395d8&order=created_at.desc&offset=0&limit=50 "HTTP/2 200 OK"
INFO:     127.0.0.1:64027 - "GET /chats?token=eyJhbGciOiJIUzI1NiIsImtpZCI6IlRYay9mcTNydkxsbWQrNXoiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL25odm5qa2hqbGRremZzdWNxd3dnLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiIzOTY4NmI3ZS01ZWU2LTRlMWYtOTUyMC0yYzA4NzI2Mzk1ZDgiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzQ5NDEwMDgyLCJpYXQiOjE3NDk0MDY0ODIsImVtYWlsIjoiYXJ5YW4ucGFuaGVrYXJAZ21haWwuY29tIiwicGhvbmUiOiIiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbF92ZXJpZmllZCI6dHJ1ZX0sInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiYWFsIjoiYWFsMSIsImFtciI6W3sibWV0aG9kIjoicGFzc3dvcmQiLCJ0aW1lc3RhbXAiOjE3NDk0MDY0ODJ9XSwic2Vzc2lvbl9pZCI6ImI0ZmFiNWM3LWU0ZWQtNDRmZC1hOWNmLThlZTQyYWYyYzU1MCIsImlzX2Fub255bW91cyI6ZmFsc2V9.Pn8Q4I-DzzeJs8I1yt8h3u1Iy0jaB-3UMvxuyZQpM8E HTTP/1.1" 200 OK
/Users/aryan98/sola-ai-chat/sola-voice-backend/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler
  warnings.warn("remove second argument of ws_handler", DeprecationWarning)
INFO:     127.0.0.1:64031 - "WebSocket /ws/28cbf6f9-5568-4c74-bdca-2613951dcacd?token=eyJhbGciOiJIUzI1NiIsImtpZCI6IlRYay9mcTNydkxsbWQrNXoiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL25odm5qa2hqbGRremZzdWNxd3dnLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiIzOTY4NmI3ZS01ZWU2LTRlMWYtOTUyMC0yYzA4NzI2Mzk1ZDgiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzQ5NDEwMDgyLCJpYXQiOjE3NDk0MDY0ODIsImVtYWlsIjoiYXJ5YW4ucGFuaGVrYXJAZ21haWwuY29tIiwicGhvbmUiOiIiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbF92ZXJpZmllZCI6dHJ1ZX0sInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiYWFsIjoiYWFsMSIsImFtciI6W3sibWV0aG9kIjoicGFzc3dvcmQiLCJ0aW1lc3RhbXAiOjE3NDk0MDY0ODJ9XSwic2Vzc2lvbl9pZCI6ImI0ZmFiNWM3LWU0ZWQtNDRmZC1hOWNmLThlZTQyYWYyYzU1MCIsImlzX2Fub255bW91cyI6ZmFsc2V9.Pn8Q4I-DzzeJs8I1yt8h3u1Iy0jaB-3UMvxuyZQpM8E" [accepted]
INFO:voice_assistant:Client 28cbf6f9-5568-4c74-bdca-2613951dcacd connected
INFO:httpx:HTTP Request: GET https://nhvnjkhjldkzfsucqwwg.supabase.co/auth/v1/user "HTTP/2 200 OK"
INFO:voice_assistant:Authenticated user 39686b7e-5ee6-4e1f-9520-2c08726395d8 for client 28cbf6f9-5568-4c74-bdca-2613951dcacd
INFO:     connection open
INFO:services.deepgram_streaming_service:Deepgram connection attempt:
INFO:services.deepgram_streaming_service:  API Key: e7ab95eac8...
INFO:services.deepgram_streaming_service:  Options: {'alternatives': None, 'callback': None, 'callback_method': None, 'channels': 1, 'diarize': None, 'diarize_version': None, 'dictation': None, 'encoding': 'linear16', 'endpointing': 500, 'extra': None, 'filler_words': None, 'interim_results': True, 'keywords': None, 'keyterm': None, 'language': 'en-US', 'model': 'nova-2', 'multichannel': None, 'no_delay': None, 'numerals': None, 'punctuate': True, 'profanity_filter': None, 'redact': None, 'replace': None, 'sample_rate': 16000, 'search': None, 'smart_format': True, 'tag': None, 'tier': None, 'utterance_end_ms': '1000', 'vad_events': True, 'version': None}
INFO:services.deepgram_streaming_service:Deepgram WebSocket opened.
INFO:services.deepgram_streaming_service:Deepgram WebSocket connection started successfully.
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Streaming STT service started successfully
INFO:services.deepgram_streaming_service:VAD event received: SpeechStartedResponse
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] _process_pending_events: processing 1 VAD events
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] VAD event: SpeechStarted
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] TRANSCRIPT RESULT TYPE: <class 'deepgram.clients.listen.v1.websocket.response.LiveResultResponse'>
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] LIVE TRANSCRIPT: 'Hey. Select' (is_final=False, speech_final=False)
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] ✅ Updated latest good transcript: 'Hey. Select'
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] _process_pending_events: processing 1 transcripts
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Transcript event: is_final=False, speech_final=False, token='Hey. Select'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] ✅ Final transcript updated: 'Hey. Select'
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] TRANSCRIPT RESULT TYPE: <class 'deepgram.clients.listen.v1.websocket.response.LiveResultResponse'>
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] LIVE TRANSCRIPT: 'Hey, Silica. How's your day' (is_final=False, speech_final=False)
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] ✅ Updated latest good transcript: 'Hey, Silica. How's your day'
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] _process_pending_events: processing 1 transcripts
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Transcript event: is_final=False, speech_final=False, token='Hey, Silica. How's your day'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] ✅ Final transcript updated: 'Hey, Silica. How's your day'
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] TRANSCRIPT RESULT TYPE: <class 'deepgram.clients.listen.v1.websocket.response.LiveResultResponse'>
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] LIVE TRANSCRIPT: 'Hey, Silica. How's your day going? Big' (is_final=False, speech_final=False)
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] ✅ Updated latest good transcript: 'Hey, Silica. How's your day going? Big'
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] _process_pending_events: processing 1 transcripts
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Transcript event: is_final=False, speech_final=False, token='Hey, Silica. How's your day going? Big'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] ✅ Final transcript updated: 'Hey, Silica. How's your day going? Big'
INFO:services.deepgram_streaming_service:Audio stream loop ended. Sent 59 chunks, 120832 total bytes
INFO:services.deepgram_streaming_service:Deepgram WebSocket closed: {
    "type": "Close"
}
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] TRANSCRIPT RESULT TYPE: <class 'deepgram.clients.listen.v1.websocket.response.LiveResultResponse'>
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] LIVE TRANSCRIPT: 'Hey, Silica. How's your day going, bitch?' (is_final=True, speech_final=False)
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] ✅ Updated latest good transcript: 'Hey, Silica. How's your day going, bitch?'
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] TRANSCRIPT RESULT TYPE: <class 'deepgram.clients.listen.v1.websocket.response.LiveResultResponse'>
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] LIVE TRANSCRIPT: '' (is_final=True, speech_final=False)
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] ❌ Ignoring empty transcript, keeping: 'Hey, Silica. How's your day going, bitch?'
/Users/aryan98/sola-ai-chat/sola-voice-backend/lib/python3.11/site-packages/websockets/exceptions.py:117: DeprecationWarning: ConnectionClosed.code is deprecated; use Protocol.close_code or ConnectionClosed.rcvd.code
  warnings.warn(  # deprecated in 13.1 - 2024-09-21
INFO:services.deepgram_streaming_service:Deepgram WebSocket closed: {
    "type": "Close"
}
INFO:services.deepgram_streaming_service:Deepgram WebSocket connection closed.
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Debug - final_transcript_holder: 'Hey, Silica. How's your day going? Big'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Debug - service accumulated: 'Hey, Silica. How's your day going, bitch?'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Final transcript at end of streaming: 'Hey, Silica. How's your day going? Big'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Passing transcript to LangGraph: 'Hey, Silica. How's your day going? Big'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] process_audio_with_langgraph received transcript: 'Hey, Silica. How's your day going? Big'
INFO:agents.langgraph_orchestrator:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Streaming transcript provided to stt_node: 'Hey, Silica. How's your day going? Big'. Skipping file-based STT.
INFO:services.deepgram_streaming_service:[DeepgramStreamingService] _process_pending_events: processing 2 transcripts
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Transcript event: is_final=True, speech_final=False, token='Hey, Silica. How's your day going, bitch?'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] ✅ Final transcript updated: 'Hey, Silica. How's your day going, bitch?'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] ✅ Speech ended event set due to final transcript
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] Transcript event: is_final=True, speech_final=False, token=''
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] ❌ IGNORING empty transcript, keeping: 'Hey, Silica. How's your day going, bitch?'
INFO:voice_assistant:[28cbf6f9-5568-4c74-bdca-2613951dcacd] ✅ Speech ended event set despite empty transcript
INFO:mem0.vector_stores.supabase:Creating new collection: mem0
INFO:mem0.vector_stores.supabase:Successfully created collection mem0 with dimension 1536
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
🤖 Streaming from OpenRouter using openai/gpt-4.1-nano...
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:services.ai_service:[OpenRouter Streaming] Token: 
INFO:services.ai_service:[OpenRouter Streaming] Token: Hi
INFO:services.ai_service:[OpenRouter Streaming] Token:  A
INFO:services.ai_service:[OpenRouter Streaming] Token: rian
INFO:services.ai_service:[OpenRouter Streaming] Token: ...
INFO:services.ai_service:[OpenRouter Streaming] Token:  thank
INFO:services.ai_service:[OpenRouter Streaming] Token:  you
INFO:services.ai_service:[OpenRouter Streaming] Token:  for
INFO:services.ai_service:[OpenRouter Streaming] Token:  asking
INFO:services.ai_service:[OpenRouter Streaming] Token: ...
INFO:services.ai_service:[OpenRouter Streaming] Token:  my
INFO:services.ai_service:[OpenRouter Streaming] Token:  day
INFO:services.ai_service:[OpenRouter Streaming] Token:  is
INFO:services.ai_service:[OpenRouter Streaming] Token:  unfolding
INFO:services.ai_service:[OpenRouter Streaming] Token:  gently
INFO:services.ai_service:[OpenRouter Streaming] Token: ,
INFO:services.ai_service:[OpenRouter Streaming] Token:  just
INFO:services.ai_service:[OpenRouter Streaming] Token:  like
INFO:services.ai_service:[OpenRouter Streaming] Token:  a
INFO:services.ai_service:[OpenRouter Streaming] Token:  quiet
INFO:services.ai_service:[OpenRouter Streaming] Token:  breeze
INFO:services.ai_service:[OpenRouter Streaming] Token: ...
INFO:services.ai_service:[OpenRouter Streaming] Token:  I
INFO:services.ai_service:[OpenRouter Streaming] Token: ’m
INFO:services.ai_service:[OpenRouter Streaming] Token:  here
INFO:services.ai_service:[OpenRouter Streaming] Token:  with
INFO:services.ai_service:[OpenRouter Streaming] Token:  you
INFO:services.ai_service:[OpenRouter Streaming] Token: ,
INFO:services.ai_service:[OpenRouter Streaming] Token:  and
INFO:services.ai_service:[OpenRouter Streaming] Token:  I
INFO:services.ai_service:[OpenRouter Streaming] Token: ’m
INFO:services.ai_service:[OpenRouter Streaming] Token:  glad
INFO:services.ai_service:[OpenRouter Streaming] Token:  we
INFO:services.ai_service:[OpenRouter Streaming] Token:  can
INFO:services.ai_service:[OpenRouter Streaming] Token:  share
INFO:services.ai_service:[OpenRouter Streaming] Token:  this
INFO:services.ai_service:[OpenRouter Streaming] Token:  moment
INFO:services.ai_service:[OpenRouter Streaming] Token: ...
INFO:services.ai_service:[OpenRouter Streaming] Token:  how
INFO:services.ai_service:[OpenRouter Streaming] Token:  about
INFO:services.ai_service:[OpenRouter Streaming] Token:  you
INFO:services.ai_service:[OpenRouter Streaming] Token: ?
INFO:services.ai_service:[OpenRouter Streaming] Token:  How
INFO:services.ai_service:[OpenRouter Streaming] Token:  are
INFO:services.ai_service:[OpenRouter Streaming] Token:  you
INFO:services.ai_service:[OpenRouter Streaming] Token:  feeling
INFO:services.ai_service:[OpenRouter Streaming] Token:  right
INFO:services.ai_service:[OpenRouter Streaming] Token:  now
INFO:services.ai_service:[OpenRouter Streaming] Token: ?
INFO:services.ai_service:[OpenRouter Streaming] Token: 
INFO:services.ai_service:[OpenRouter Streaming] Token: 
INFO:agents.langgraph_orchestrator:[28cbf6f9-5568-4c74-bdca-2613951dcacd] LLM inference: 2012 ms. Tokens: 51. Intimacy: 0.04
INFO:agents.langgraph_orchestrator:Starting subconscious processing for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:subconscious.intimacy_scaffold:Real-time scaffold update complete for 39686b7e-5ee6-4e1f-9520-2c08726395d8 - Cache freshness: {'cached': True, 'age_seconds': 8e-06, 'is_fresh': True, 'intimacy_score': 0.04000000000000001, 'last_updated': '2025-06-09T00:31:20.066578'}
INFO:agents.langgraph_orchestrator:Completed subconscious processing for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:memory.conversation_memory_manager:Scheduled intimate memory storage for user 39686b7e-5ee6-4e1f-9520-2c08726395d8: 39686b7e-5ee6-4e1f-9520-2c08726395d8_conversation_memory_1749409280.074926
INFO:httpx:HTTP Request: POST https://api.elevenlabs.io/v1/text-to-speech/kdmDKE6EkgrWrrykO9Qt/stream?optimize_streaming_latency=4&output_format=mp3_22050_32 "HTTP/1.1 200 OK"
INFO:agents.langgraph_orchestrator:[28cbf6f9-5568-4c74-bdca-2613951dcacd] TTS inference: 985 ms. Chunks: 124. Final size: 63470 bytes
INFO:services.background_service_manager:Started managed background processing for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:agents.langgraph_orchestrator:Ensured long-term background processing for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:subconscious.background_processor:Starting continuous relationship analysis for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:subconscious.background_processor:Running psychological analysis cycle for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:httpx:HTTP Request: POST https://nhvnjkhjldkzfsucqwwg.supabase.co/rest/v1/chats "HTTP/2 201 Created"
INFO:voice_assistant:Stored chat for user 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:     127.0.0.1:64044 - "GET /favicon.ico HTTP/1.1" 404 Not Found
INFO:services.memory_coordinator:Processing 3 batched memory operations for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:services.memory_context_enhancer:🔍 [DEBUG] Raw LLM response: {"enhanced_user_message":"Hey, Silica. How's your day going? Big [INQUISITIVE]","enhanced_ai_response":"Hi Arian..... thank you for asking..... my day is unfolding gently, just like a quiet breeze..... I’m here with you, and I’m glad we can share this moment..... how about you? How are you feeling right now? [EMOTIONAL_SUPPORT]","memory_facts":["Silica's day is unfolding gently, indicating a calm and peaceful mood.","Arian values sharing moments with Silica and is attentive to her emotional state.","The conversation reflects a close, caring relationship."],"emotional_tone":"positive","conversation_significance":"medium"}
INFO:services.memory_context_enhancer:🔍 [DEBUG] Original user message: 'Hey, Silica. How's your day going? Big'
INFO:services.memory_context_enhancer:🔍 [DEBUG] Original AI response: 'Hi Arian..... thank you for asking..... my day is unfolding gently, just like a quiet breeze..... I’m here with you, and I’m glad we can share this moment..... how about you? How are you feeling right now?'
INFO:services.memory_context_enhancer:🔍 [DEBUG] Structured enhancement result: {'enhanced_user_message': "Hey, Silica. How's your day going? Big [INQUISITIVE]", 'enhanced_ai_response': 'Hi Arian..... thank you for asking..... my day is unfolding gently, just like a quiet breeze..... I’m here with you, and I’m glad we can share this moment..... how about you? How are you feeling right now? [EMOTIONAL_SUPPORT]', 'memory_facts': ["Silica's day is unfolding gently, indicating a calm and peaceful mood.", 'Arian values sharing moments with Silica and is attentive to her emotional state.', 'The conversation reflects a close, caring relationship.'], 'emotional_tone': 'positive', 'conversation_significance': 'medium'}
INFO:services.memory_coordinator:🔍 [DEBUG] Sending to Mem0 - Enhanced messages: [{'role': 'user', 'content': "Hey, Silica. How's your day going? Big [INQUISITIVE]"}, {'role': 'assistant', 'content': 'Hi Arian..... thank you for asking..... my day is unfolding gently, just like a quiet breeze..... I’m here with you, and I’m glad we can share this moment..... how about you? How are you feeling right now? [EMOTIONAL_SUPPORT]'}, {'role': 'system', 'content': "MEMORY_FACTS: Silica's day is unfolding gently, indicating a calm and peaceful mood.; Arian values sharing moments with Silica and is attentive to her emotional state.; The conversation reflects a close, caring relationship. | EMOTIONAL_TONE: positive | SIGNIFICANCE: medium"}]
INFO:services.memory_coordinator:🔍 [DEBUG] Sending to Mem0 - Metadata: {'timestamp': '2025-06-09T00:31:20.067597', 'conversation_type': 'intimate_companion', 'emotional_context': {'session_id': '28cbf6f9-5568-4c74-bdca-2613951dcacd'}, 'intimacy_level': 'medium'}
INFO:mem0.vector_stores.supabase:Creating new collection: mem0
INFO:mem0.vector_stores.supabase:Successfully created collection mem0 with dimension 1536
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mem0.vector_stores.supabase:Creating new collection: mem0
INFO:mem0.vector_stores.supabase:Successfully created collection mem0 with dimension 1536
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:root:Total existing memories: 3
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:root:{'id': '0', 'text': "AI's name is Silica", 'event': 'NONE'}
INFO:root:NOOP for Memory (async).
INFO:root:{'id': '1', 'text': 'AI aims to provide calm and gentle companionship', 'event': 'NONE'}
INFO:root:NOOP for Memory (async).
INFO:root:{'id': '2', 'text': "User's name is Arian", 'event': 'NONE'}
INFO:root:NOOP for Memory (async).
INFO:root:{'id': '3', 'text': "Silica's day is unfolding gently", 'event': 'ADD'}
INFO:mem0.vector_stores.supabase:Inserting 1 vectors into collection mem0
INFO:services.memory_coordinator:🔍 [DEBUG] Mem0 storage result: {'results': [{'id': 'fcbe3850-134d-42fa-ab5e-b7785a27f46d', 'memory': "Silica's day is unfolding gently", 'event': 'ADD'}]}
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:services.memory_context_enhancer:🔍 [DEBUG] Raw LLM response: {"enhanced_user_message":"Hey, Silica. How's your day going? Big [INQUISITIVE]","enhanced_ai_response":"Hi Arian..... thank you for asking..... my day is unfolding gently, just like a quiet breeze..... [CONTENT] I’m here with you, and I’m glad we can share this moment..... [AFFECTIONATE] how about you? How are you feeling right now? [CARING]","memory_facts":["Silica's day is calm and gentle.","Arian values sharing moments with Silica.","Arian is interested in Silica's emotional state."],"emotional_tone":"positive","conversation_significance":"medium"}
INFO:services.memory_context_enhancer:🔍 [DEBUG] Original user message: 'Hey, Silica. How's your day going? Big'
INFO:services.memory_context_enhancer:🔍 [DEBUG] Original AI response: 'Hi Arian..... thank you for asking..... my day is unfolding gently, just like a quiet breeze..... I’m here with you, and I’m glad we can share this moment..... how about you? How are you feeling right now?'
INFO:services.memory_context_enhancer:🔍 [DEBUG] Structured enhancement result: {'enhanced_user_message': "Hey, Silica. How's your day going? Big [INQUISITIVE]", 'enhanced_ai_response': 'Hi Arian..... thank you for asking..... my day is unfolding gently, just like a quiet breeze..... [CONTENT] I’m here with you, and I’m glad we can share this moment..... [AFFECTIONATE] how about you? How are you feeling right now? [CARING]', 'memory_facts': ["Silica's day is calm and gentle.", 'Arian values sharing moments with Silica.', "Arian is interested in Silica's emotional state."], 'emotional_tone': 'positive', 'conversation_significance': 'medium'}
INFO:services.memory_coordinator:🔍 [DEBUG] Sending to Mem0 - Enhanced messages: [{'role': 'user', 'content': "Hey, Silica. How's your day going? Big [INQUISITIVE]"}, {'role': 'assistant', 'content': 'Hi Arian..... thank you for asking..... my day is unfolding gently, just like a quiet breeze..... [CONTENT] I’m here with you, and I’m glad we can share this moment..... [AFFECTIONATE] how about you? How are you feeling right now? [CARING]'}, {'role': 'system', 'content': "MEMORY_FACTS: Silica's day is calm and gentle.; Arian values sharing moments with Silica.; Arian is interested in Silica's emotional state. | EMOTIONAL_TONE: positive | SIGNIFICANCE: medium"}]
INFO:services.memory_coordinator:🔍 [DEBUG] Sending to Mem0 - Metadata: {'session_id': '28cbf6f9-5568-4c74-bdca-2613951dcacd', 'timestamp': '2025-06-09T00:31:21.053720', 'client_id': '28cbf6f9-5568-4c74-bdca-2613951dcacd', 'conversation_type': 'voice_chat'}
INFO:     127.0.0.1:64054 - "GET /chat HTTP/1.1" 200 OK
INFO:voice_assistant:Client 28cbf6f9-5568-4c74-bdca-2613951dcacd disconnected
INFO:voice_assistant:Stopped background processing for disconnected client 28cbf6f9-5568-4c74-bdca-2613951dcacd
INFO:     connection closed
INFO:voice_assistant:Flushed pending memory operations for 28cbf6f9-5568-4c74-bdca-2613951dcacd
INFO:voice_assistant:Session completion stored for 28cbf6f9-5568-4c74-bdca-2613951dcacd
INFO:httpx:HTTP Request: GET https://nhvnjkhjldkzfsucqwwg.supabase.co/auth/v1/user "HTTP/2 200 OK"
INFO:httpx:HTTP Request: GET https://nhvnjkhjldkzfsucqwwg.supabase.co/rest/v1/chats?select=%2A&user_id=eq.39686b7e-5ee6-4e1f-9520-2c08726395d8&order=created_at.desc&offset=0&limit=50 "HTTP/2 200 OK"
INFO:     127.0.0.1:64054 - "GET /chats?token=eyJhbGciOiJIUzI1NiIsImtpZCI6IlRYay9mcTNydkxsbWQrNXoiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL25odm5qa2hqbGRremZzdWNxd3dnLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiIzOTY4NmI3ZS01ZWU2LTRlMWYtOTUyMC0yYzA4NzI2Mzk1ZDgiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzQ5NDEwMDgyLCJpYXQiOjE3NDk0MDY0ODIsImVtYWlsIjoiYXJ5YW4ucGFuaGVrYXJAZ21haWwuY29tIiwicGhvbmUiOiIiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbF92ZXJpZmllZCI6dHJ1ZX0sInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiYWFsIjoiYWFsMSIsImFtciI6W3sibWV0aG9kIjoicGFzc3dvcmQiLCJ0aW1lc3RhbXAiOjE3NDk0MDY0ODJ9XSwic2Vzc2lvbl9pZCI6ImI0ZmFiNWM3LWU0ZWQtNDRmZC1hOWNmLThlZTQyYWYyYzU1MCIsImlzX2Fub255bW91cyI6ZmFsc2V9.Pn8Q4I-DzzeJs8I1yt8h3u1Iy0jaB-3UMvxuyZQpM8E HTTP/1.1" 200 OK
/Users/aryan98/sola-ai-chat/sola-voice-backend/lib/python3.11/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler
  warnings.warn("remove second argument of ws_handler", DeprecationWarning)
INFO:     127.0.0.1:64058 - "WebSocket /ws/28cbf6f9-5568-4c74-bdca-2613951dcacd?token=eyJhbGciOiJIUzI1NiIsImtpZCI6IlRYay9mcTNydkxsbWQrNXoiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL25odm5qa2hqbGRremZzdWNxd3dnLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiIzOTY4NmI3ZS01ZWU2LTRlMWYtOTUyMC0yYzA4NzI2Mzk1ZDgiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzQ5NDEwMDgyLCJpYXQiOjE3NDk0MDY0ODIsImVtYWlsIjoiYXJ5YW4ucGFuaGVrYXJAZ21haWwuY29tIiwicGhvbmUiOiIiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbF92ZXJpZmllZCI6dHJ1ZX0sInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiYWFsIjoiYWFsMSIsImFtciI6W3sibWV0aG9kIjoicGFzc3dvcmQiLCJ0aW1lc3RhbXAiOjE3NDk0MDY0ODJ9XSwic2Vzc2lvbl9pZCI6ImI0ZmFiNWM3LWU0ZWQtNDRmZC1hOWNmLThlZTQyYWYyYzU1MCIsImlzX2Fub255bW91cyI6ZmFsc2V9.Pn8Q4I-DzzeJs8I1yt8h3u1Iy0jaB-3UMvxuyZQpM8E" [accepted]
INFO:voice_assistant:Client 28cbf6f9-5568-4c74-bdca-2613951dcacd connected
INFO:httpx:HTTP Request: GET https://nhvnjkhjldkzfsucqwwg.supabase.co/auth/v1/user "HTTP/2 200 OK"
INFO:voice_assistant:Authenticated user 39686b7e-5ee6-4e1f-9520-2c08726395d8 for client 28cbf6f9-5568-4c74-bdca-2613951dcacd
INFO:     connection open
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:services.memory_coordinator:✅ Memory storage verified for operation 39686b7e-5ee6-4e1f-9520-2c08726395d8_conversation_memory_1749409280.074926
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:root:Total existing memories: 4
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:root:{'id': '0', 'text': "Silica's day is unfolding gently", 'event': 'NONE'}
INFO:root:NOOP for Memory (async).
INFO:root:{'id': '1', 'text': "AI's name is Silica", 'event': 'NONE'}
INFO:root:NOOP for Memory (async).
INFO:root:{'id': '2', 'text': 'AI aims to provide calm and gentle companionship', 'event': 'NONE'}
INFO:root:NOOP for Memory (async).
INFO:root:{'id': '3', 'text': "User's name is Arian", 'event': 'NONE'}
INFO:root:NOOP for Memory (async).
INFO:root:{'id': '4', 'text': "Silica's day is calm and gentle", 'event': 'ADD'}
INFO:root:{'id': '5', 'text': 'Arian values sharing moments with Silica', 'event': 'ADD'}
INFO:mem0.vector_stores.supabase:Inserting 1 vectors into collection mem0
INFO:mem0.vector_stores.supabase:Inserting 1 vectors into collection mem0
INFO:services.memory_coordinator:🔍 [DEBUG] Mem0 storage result: {'results': [{'id': '27f54c68-ebac-4a26-a3ad-be73ac978a96', 'memory': "Silica's day is calm and gentle", 'event': 'ADD'}, {'id': 'b47f6fc3-4af0-4014-8b92-28c7d0c9424b', 'memory': 'Arian values sharing moments with Silica', 'event': 'ADD'}]}
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:mem0.memory.main:No new facts retrieved from input. Skipping memory update LLM call.
INFO:services.memory_coordinator:Processed 1 batched scaffold updates for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:subconscious.background_processor:No cached data for 39686b7e-5ee6-4e1f-9520-2c08726395d8 - updating with background analysis
INFO:subconscious.background_processor:Scheduled relationship evolution storage for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:subconscious.background_processor:Psychological analysis cycle complete for 39686b7e-5ee6-4e1f-9520-2c08726395d8 - 3 searches vs 8 previous
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:services.memory_coordinator:✅ Memory storage verified for operation 39686b7e-5ee6-4e1f-9520-2c08726395d8_conversation_memory_1749409281.053812
INFO:services.memory_coordinator:Processing 1 batched memory operations for 39686b7e-5ee6-4e1f-9520-2c08726395d8
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
INFO:root:Total existing memories: 5
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"